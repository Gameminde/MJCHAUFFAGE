MJ CHAUFFAGE - API Flow Diagram
=====================================

┌─────────────────────────────────────────────────────────────────────────────────┐
│                              FRONTEND (Port 3000)                              │
├─────────────────────────────────────────────────────────────────────────────────┤
│  Product List Page          Product Detail Page          Product Card          │
│  /fr/products              /fr/products/:id            Component              │
│         │                           │                         │                │
│         └───────────────────────────┼─────────────────────────┘                │
│                                     │                                          │
│  ┌──────────────────────────────────┴─────────────────────────────────────┐    │
│  │                    SSR API Functions                                  │    │
│  │  fetchProductsSSR()    fetchProductDetailSSR()                       │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────────┘
                                     │
                                     │ HTTP Requests
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              BACKEND API (Port 3001)                          │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐            │
│  │  Products Routes│    │  Upload Routes  │    │ Static Files    │            │
│  │  /api/v1/products│    │  /api/v1/uploads│    │  /uploads/*     │            │
│  └─────────────────┘    └─────────────────┘    └─────────────────┘            │
│         │                           │                         │                │
│         └───────────────────────────┼─────────────────────────┘                │
│                                     │                                          │
│  ┌──────────────────────────────────┴─────────────────────────────────────┐    │
│  │                    Controllers                                        │    │
│  │  ProductController    UploadController                               │    │
│  │  - getProducts()      - handleImageUpload()                         │    │
│  │  - getProduct()                                                      │    │
│  │  - createProduct()                                                   │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                     │                                          │
│  ┌──────────────────────────────────┴─────────────────────────────────────┐    │
│  │                    Services                                          │    │
│  │  ProductService                                                     │    │
│  │  - getProducts()                                                    │    │
│  │  - getProductById()                                                 │    │
│  │  - createProduct()                                                  │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────────┘
                                     │
                                     │ Database Queries
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              DATABASE (PostgreSQL)                            │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐            │
│  │  Products Table │    │ Categories Table│    │  Images Table   │            │
│  │  - id           │    │ - id            │    │ - id            │            │
│  │  - name         │    │ - name          │    │ - url           │            │
│  │  - description  │    │ - slug          │    │ - altText       │            │
│  │  - price        │    │ - description   │    │ - productId     │            │
│  │  - images       │    │                 │    │                 │            │
│  │  - categoryId   │    │                 │    │                 │            │
│  └─────────────────┘    └─────────────────┘    └─────────────────┘            │
└─────────────────────────────────────────────────────────────────────────────────┘
                                     │
                                     │ File Storage
                                     ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              FILE STORAGE                                      │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────────────────────────────────────────────────────────────┐    │
│  │                    Local Uploads Directory                             │    │
│  │  /uploads/                                                             │    │
│  │  ├── product-image-1234567890.jpg                                     │    │
│  │  ├── product-image-1234567891.png                                     │    │
│  │  └── ...                                                              │    │
│  └─────────────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                            ADMIN DASHBOARD (Port 3002)                        │
├─────────────────────────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐            │
│  │ Products List   │    │ New Product     │    │ Product API     │            │
│  │ /dashboard/     │    │ /dashboard/     │    │ productsApi     │            │
│  │ products        │    │ products/new    │    │ - getAll()      │            │
│  └─────────────────┘    └─────────────────┘    │ - create()      │            │
│         │                           │          │ - update()      │            │
│         └───────────────────────────┼──────────│ - delete()      │            │
│                                     │          └─────────────────┘            │
│                                     │                                        │
│  ┌──────────────────────────────────┴─────────────────────────────────────┐    │
│  │                    Upload API                                        │    │
│  │  uploadsApi.uploadImage()                                            │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────────┘
                                     │
                                     │ HTTP Requests to Backend
                                     ▼
                                     (Same Backend API as above)

API CALL FLOWS:
===============

1. PRODUCT DISPLAY FLOW:
   Frontend → SSR API → Backend API → Database → Response

2. PRODUCT CREATION FLOW:
   Admin Dashboard → Product API → Backend API → Database
   Admin Dashboard → Upload API → Backend API → File Storage

3. IMAGE DISPLAY FLOW:
   Frontend/Admin → Backend Static Server → File Storage

FIXES APPLIED:
==============

✅ Fixed product detail routing (removed /details/ from URL)
✅ Fixed image display in admin dashboard
✅ Fixed API configuration (admin dashboard now uses port 3001)
✅ Fixed text display issues
✅ Created comprehensive API documentation