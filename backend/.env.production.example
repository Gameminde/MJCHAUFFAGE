# ===================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION - BACKEND
# IMPORTANT: Never commit actual secrets to version control
# ===================================================================

# -------------------------------------
# Environment
# -------------------------------------
NODE_ENV=production
PORT=3001

# -------------------------------------
# Database Configuration (Production)
# -------------------------------------
# Production PostgreSQL database URL (Neon, AWS RDS, etc.)
DATABASE_URL="postgresql://prod_user:SECURE_PASSWORD@prod-host:5432/mj_chauffage_prod"

# Connection pool settings for production
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=20
DATABASE_TIMEOUT=30000

# -------------------------------------
# Security Configuration
# -------------------------------------
# Strong JWT secrets (generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))")
JWT_SECRET="GENERATE_STRONG_256_BIT_SECRET_HERE"
JWT_REFRESH_SECRET="GENERATE_STRONG_256_BIT_REFRESH_SECRET_HERE"
JWT_EXPIRES_IN="15m"
JWT_REFRESH_EXPIRES_IN="7d"

# Session secret (generate with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))")
SESSION_SECRET="GENERATE_STRONG_SESSION_SECRET_HERE"

# CORS configuration
FRONTEND_URL="https://mjchauffage.com"
ALLOWED_ORIGINS="https://mjchauffage.com,https://www.mjchauffage.com,https://admin.mjchauffage.com"

# -------------------------------------
# Redis Configuration (Production)
# -------------------------------------
REDIS_URL="redis://prod-redis-host:6379"
REDIS_PASSWORD="REDIS_PASSWORD_HERE"
REDIS_TLS=true

# -------------------------------------
# Payment Configuration (Production)
# -------------------------------------
# Stripe production keys
STRIPE_SECRET_KEY="sk_live_YOUR_PRODUCTION_STRIPE_SECRET_KEY"
STRIPE_WEBHOOK_SECRET="whsec_YOUR_PRODUCTION_WEBHOOK_SECRET"
STRIPE_PUBLIC_KEY="pk_live_YOUR_PRODUCTION_STRIPE_PUBLIC_KEY"

# -------------------------------------
# File Storage (Production)
# -------------------------------------
# Cloudflare R2 or AWS S3 for production
R2_ACCESS_KEY_ID="PRODUCTION_R2_ACCESS_KEY"
R2_SECRET_ACCESS_KEY="PRODUCTION_R2_SECRET_KEY"
R2_BUCKET_NAME="mj-chauffage-prod-uploads"
R2_ACCOUNT_ID="YOUR_CLOUDFLARE_ACCOUNT_ID"
R2_PUBLIC_URL="https://uploads.mjchauffage.com"

# -------------------------------------
# Email Configuration (Production)
# -------------------------------------
# Production SMTP settings
SMTP_HOST="smtp.mailgun.org"
SMTP_PORT=587
SMTP_USER="postmaster@mg.mjchauffage.com"
SMTP_PASS="PRODUCTION_SMTP_PASSWORD"
FROM_EMAIL="MJ CHAUFFAGE <noreply@mjchauffage.com>"

# -------------------------------------
# Google Services (Production)
# -------------------------------------
GOOGLE_CLIENT_ID="PRODUCTION_GOOGLE_CLIENT_ID"
GOOGLE_CLIENT_SECRET="PRODUCTION_GOOGLE_CLIENT_SECRET"
GOOGLE_MAPS_API_KEY="PRODUCTION_GOOGLE_MAPS_API_KEY"

# -------------------------------------
# Monitoring and Analytics
# -------------------------------------
# Error tracking (Sentry)
SENTRY_DSN="https://YOUR_SENTRY_DSN@sentry.io/PROJECT_ID"

# Application monitoring
NEW_RELIC_LICENSE_KEY="YOUR_NEW_RELIC_LICENSE_KEY"
NEW_RELIC_APP_NAME="MJ CHAUFFAGE Backend"

# Google Analytics
GOOGLE_ANALYTICS_ID="GA_MEASUREMENT_ID"

# -------------------------------------
# Rate Limiting (Production)
# -------------------------------------
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=true

# -------------------------------------
# Logging Configuration
# -------------------------------------
LOG_LEVEL=warn
LOG_FORMAT=json
LOG_FILE=/var/log/mj-chauffage/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# -------------------------------------
# Health Check Configuration
# -------------------------------------
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000

# -------------------------------------
# Performance Configuration
# -------------------------------------
# Memory limits
NODE_OPTIONS="--max-old-space-size=2048"

# Compression
COMPRESSION_LEVEL=6
COMPRESSION_THRESHOLD=1024

# Cache settings
CACHE_TTL_DEFAULT=300
CACHE_TTL_PRODUCTS=600
CACHE_TTL_CATEGORIES=1800

# -------------------------------------
# SSL/TLS Configuration
# -------------------------------------
SSL_CERT_PATH="/etc/ssl/certs/mjchauffage.crt"
SSL_KEY_PATH="/etc/ssl/private/mjchauffage.key"
FORCE_HTTPS=true

# -------------------------------------
# Backup Configuration
# -------------------------------------
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET="mj-chauffage-backups"